{% extends "cloud_browser/base.html" %}

{% comment %}
###############################################################################
# Browser
###############################################################################
{% endcomment %}

{% block title %}
Cloud Browser - {{ path }}
{% endblock %}

{% block cloud_browser_breadcrumbs %}
  {% include "cloud_browser/_breadcrumbs.html" %}
{% endblock %}

{% block template_head %}
{# TODO: Replace with alternate template tag / "include or serve" option #}
<style type="text/css">
div#cloud-browser-breadcrumbs {
    color: #999;
}
div#cloud-browser-breadcrumbs a {
    color: #333;
    text-decoration: none;
}
div#cloud-browser-breadcrumbs a:hover {
    text-decoration: underline;
}
/*div#cloud-browser-containers,
div #cloud-browser-objects {
    border: 1px solid red;
}TODO DEBUG REMOVE*/
div#cloud-browser-containers h2,
div #cloud-browser-objects h2 {
    text-align: center;
}
div#cloud-browser-containers {
    background: #333;
    color: #ccc;
    float: left;
    width: 200px;
}
div#cloud-browser-containers a {
    color: #ccc;
    text-decoration: none;
}
div#cloud-browser-containers a:hover {
    text-decoration: underline;
}
div#cloud-browser-objects {
    margin-left: 200px;
    width: auto;
}
table#cloud-browser-objects-table {
    margin: auto;
    width: 99%;
}
table#cloud-browser-objects-table thead,
table#cloud-browser-objects-table tfoot,
table#cloud-browser-objects-table tfoot a {
    background: #333;
    color: #ccc;
}
table#cloud-browser-objects-table tfoot {
    text-align: right;
}
.cloud-browser-empty {
    text-align: center;
    font-style: italic;
    color: #666;
}
</style>
{% endblock %}

{% block content %}
<div id="cloud-browser-all">
<div id="cloud-browser-containers">
<h2>Containers</h2>
<ul>
{% for cont in containers %}
  <li><a href="{% url cloud_browser_browser cont.name %}">{{ cont.name }}</a>
      {#({{ cont.count }} objects, {{ cont.size|filesizeformat }})#}</li>
{% endfor %}
</ul>
</div>

<div id="cloud-browser-objects">
<h2>Objects</h2>
{% if objects %}
<table id="cloud-browser-objects-table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Content Type</th>
      <th>Encoding</th>
      <th>Size (Bytes)</th>
      <th>Date</th>
    </tr>
  </thead>
  <tbody>
    {% for obj in objects %}
      <tr>
        {% if obj.is_file %}
        <td><a href="{% url cloud_browser_document obj.path %}">
            {{ obj.basename }}</a></td>
        {% else %}
        <td><a href="{% url cloud_browser_browser obj.path %}">
            {{ obj.basename }}</a></td>
        {% endif %}
        <td>{{ obj.type }}</td>
        <td>{{ obj.smart_content_type|default_if_none:'' }}</td>
        <td>{{ obj.smart_content_encoding|default_if_none:'' }}</td>
        <td>{{ obj.size|filesizeformat }}</td>
        <td>{{ obj.last_modified|default_if_none:'' }}</td>
      </tr>
    {% endfor %}
  </tbody>
  <tfoot>
    <tr>
      <th colspan="6">
        {% if marker %}
        <a href="{% url cloud_browser_browser path %}?marker={{ marker|urlencode }}&limit={{ limit|urlencode }}">Next</a> &raquo;
        {% else %}
            &nbsp;
        {% endif %}
      </td>
    </tr>
  </tfoot>
</table>
{% else %}
    {% if container %}
        <div class="cloud-browser-empty" colspan="6">
          No objects found in &ldquo;{{ path }}.&rdquo;
        </div>
    {% else %}
        <div class="cloud-browser-empty" colspan="6">
          No container selected. Please click on a container to list object contents.
        </div>
    {% endif %}
{% endif %}
</div>
</div>
{% endblock %}
